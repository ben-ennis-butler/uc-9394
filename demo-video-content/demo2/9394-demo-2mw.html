<html>
	<head>
		<title>Dark Sky Demo 2</title>
	</head>
	<body>
		<style type="text/css">
			body{
				font-family: Arial, sans-serif;
				width:60%;
				margin: 0 auto;
			}

			td.temp{
				text-align: right;
			}

		</style>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){

				var key = "3badb28e46dbeff33b41f55ae6781555";

				var url = "https://api.darksky.net/forecast/" + key + "/-35.2760,149.1344?units=si";

				$.get(url, function(data){

					var now = new Date(data.currently.time*1000); 
					// create a Date object, with data from the API

					var time = $("<h1>").text("At: " + now.toDateString() + ", " + now.toTimeString() );
					$("#currently").append(time); // stick it to the body

					var h = $("<h1>").text("Currently: " + data.currently.summary );	
					$("#currently").append(h); // stick it to the body

					var t = $("<h2>").html("Temp: " + data.currently.temperature + "&deg;C" );
					$("#currently").append(t); // stick it to the body

					// forecast data?
					// loop through the data

					for (var i = 0; i < data.daily.data.length; i++) {
						var f = data.daily.data[i]; // the data for one day in the forecast
						// first create a tr 
						var row = $("<tr>");
						var date = new Date(f.time*1000); // get the forecast data time and convert it to a JS date
						row.append("<td>" +  date.toDateString() + "</td>");
						row.append("<td>" + f.summary + "</td>");
						row.append("<td class='temp'>" + Math.round(f.temperatureMin) + "&deg;C</td>");
						row.append("<td class='temp'>" + Math.round(f.temperatureMax) + "&deg;C</td>");

						// append the tr to the table
						$("#forecast").append(row);

					};



				});
			});

		</script>

		<div id="currently"></div>

		<table id="forecast">
			<tr><th>date</th><th>summary</th><th>min</th><th>max</th></tr>


		</table>

	</body>
</html>